# Quick Start Guide

Get your AWS Financial Services Security Infrastructure up and running in under an hour.

## Prerequisites

- [x] AWS account with Organizations enabled
- [x] AWS CLI configured with admin credentials
- [x] Terraform 1.5+ installed
- [x] Git installed
- [x] MFA enabled on your account

## Step 1: Clone the Repository

```bash
git clone https://github.com/YOUR_ORG/aws-finserv-security-infrastructure.git
cd aws-finserv-security-infrastructure
```

## Step 2: Configure AWS Credentials

```bash
# Configure AWS CLI
aws configure --profile finserv-admin

# Verify access
aws sts get-caller-identity --profile finserv-admin
```

## Step 3: Initialize Terraform Backend

```bash
# Create S3 bucket for Terraform state
aws s3 mb s3://your-terraform-state-bucket \
    --region us-east-1 \
    --profile finserv-admin

# Enable versioning
aws s3api put-bucket-versioning \
    --bucket your-terraform-state-bucket \
    --versioning-configuration Status=Enabled

# Create DynamoDB table for state locking
aws dynamodb create-table \
    --table-name terraform-state-lock \
    --attribute-definitions AttributeName=LockID,AttributeType=S \
    --key-schema AttributeName=LockID,KeyType=HASH \
    --billing-mode PAY_PER_REQUEST \
    --region us-east-1
```

## Step 4: Set Up AWS Organizations

```bash
# Enable AWS Organizations (if not already enabled)
aws organizations create-organization --feature-set ALL

# Create Organizational Units
aws organizations create-organizational-unit \
    --parent-id r-xxxx \
    --name "Security"

aws organizations create-organizational-unit \
    --parent-id r-xxxx \
    --name "Production"

aws organizations create-organizational-unit \
    --parent-id r-xxxx \
    --name "Non-Production"
```

## Step 5: Deploy Foundation

### 5a. Deploy Logging Account

```bash
cd terraform/environments/logging

# Create terraform.tfvars
cat > terraform.tfvars <<EOF
environment          = "logging"
vpc_cidr            = "10.200.0.0/16"
availability_zones  = ["us-east-1a", "us-east-1b", "us-east-1c"]
enable_flow_logs    = true
common_tags = {
  Environment = "logging"
  ManagedBy   = "Terraform"
  CostCenter  = "Infrastructure"
  Compliance  = "PCI-DSS"
}
EOF

# Initialize and apply
terraform init
terraform plan
terraform apply
```

### 5b. Deploy Security Account

```bash
cd ../security

# Create terraform.tfvars
cat > terraform.tfvars <<EOF
environment          = "security"
vpc_cidr            = "10.0.0.0/16"
availability_zones  = ["us-east-1a", "us-east-1b", "us-east-1c"]
enable_guardduty    = true
enable_security_hub = true
common_tags = {
  Environment = "security"
  ManagedBy   = "Terraform"
  CostCenter  = "Security"
  Compliance  = "PCI-DSS"
}
EOF

terraform init
terraform plan
terraform apply
```

### 5c. Deploy Production VPC

```bash
cd ../prod

# Create terraform.tfvars
cat > terraform.tfvars <<EOF
environment          = "prod"
vpc_cidr            = "10.1.0.0/16"
availability_zones  = ["us-east-1a", "us-east-1b", "us-east-1c"]
enable_nat_gateway  = true
create_public_subnets = true
common_tags = {
  Environment = "prod"
  ManagedBy   = "Terraform"
  CostCenter  = "Production"
  Compliance  = "PCI-DSS"
}
EOF

terraform init
terraform plan
terraform apply
```

## Step 6: Enable Security Services

### Enable GuardDuty

```bash
# Enable GuardDuty in security account
aws guardduty create-detector \
    --enable \
    --finding-publishing-frequency FIFTEEN_MINUTES \
    --profile finserv-security

# Add member accounts
aws guardduty create-members \
    --detector-id <detector-id> \
    --account-details AccountId=<prod-account-id>,Email=prod@company.com \
    --profile finserv-security
```

### Enable Security Hub

```bash
# Enable Security Hub
aws securityhub enable-security-hub \
    --enable-default-standards \
    --profile finserv-security

# Enable standards
aws securityhub batch-enable-standards \
    --standards-subscription-requests '[
        {
            "StandardsArn": "arn:aws:securityhub:us-east-1::standards/aws-foundational-security-best-practices/v/1.0.0"
        },
        {
            "StandardsArn": "arn:aws:securityhub:us-east-1::standards/pci-dss/v/3.2.1"
        }
    ]' \
    --profile finserv-security
```

### Enable AWS Config

```bash
# Create S3 bucket for Config
aws s3 mb s3://your-config-bucket \
    --region us-east-1

# Enable Config
aws configservice put-configuration-recorder \
    --configuration-recorder name=default,roleARN=arn:aws:iam::ACCOUNT:role/aws-service-role/config.amazonaws.com/AWSServiceRoleForConfig \
    --recording-group allSupported=true,includeGlobalResourceTypes=true

aws configservice put-delivery-channel \
    --delivery-channel name=default,s3BucketName=your-config-bucket

aws configservice start-configuration-recorder \
    --configuration-recorder-name default
```

## Step 7: Configure Monitoring

### Enable CloudTrail (Organization Trail)

```bash
# Create trail in management account
aws cloudtrail create-trail \
    --name organization-trail \
    --s3-bucket-name your-cloudtrail-bucket \
    --is-multi-region-trail \
    --is-organization-trail \
    --enable-log-file-validation

aws cloudtrail start-logging \
    --name organization-trail
```

### Create CloudWatch Alarms

```bash
# Example: Root account usage alarm
aws cloudwatch put-metric-alarm \
    --alarm-name root-account-usage \
    --alarm-description "Alert on root account usage" \
    --metric-name UserIdentity \
    --namespace CloudTrailMetrics \
    --statistic Sum \
    --period 300 \
    --threshold 1 \
    --comparison-operator GreaterThanOrEqualToThreshold \
    --evaluation-periods 1 \
    --alarm-actions arn:aws:sns:us-east-1:ACCOUNT:security-alerts
```

## Step 8: Deploy Sample Application (Optional)

```bash
cd terraform/examples/three-tier-app

# Deploy sample three-tier application
terraform init
terraform plan
terraform apply
```

## Step 9: Verify Deployment

### Check VPCs

```bash
# List all VPCs
aws ec2 describe-vpcs \
    --query 'Vpcs[*].[VpcId,CidrBlock,Tags[?Key==`Name`].Value|[0]]' \
    --output table
```

### Check Security Services

```bash
# GuardDuty status
aws guardduty get-detector \
    --detector-id <detector-id>

# Security Hub status
aws securityhub describe-hub

# Config status
aws configservice describe-configuration-recorder-status
```

### Check CloudTrail

```bash
# Get trail status
aws cloudtrail get-trail-status \
    --name organization-trail
```

## Step 10: Access the Environment

### Using AWS Console

1. Navigate to [AWS SSO Portal](https://your-org.awsapps.com/start)
2. Select your account
3. Select appropriate permission set

### Using AWS CLI

```bash
# Assume role in production account
aws sts assume-role \
    --role-arn arn:aws:iam::PROD-ACCOUNT:role/AdminRole \
    --role-session-name production-session \
    --profile finserv-admin

# Export credentials
export AWS_ACCESS_KEY_ID=...
export AWS_SECRET_ACCESS_KEY=...
export AWS_SESSION_TOKEN=...
```

## Common Commands

### Terraform

```bash
# Format code
terraform fmt -recursive

# Validate configuration
terraform validate

# Plan changes
terraform plan

# Apply changes
terraform apply

# Destroy resources
terraform destroy
```

### Security Scanning

```bash
# Scan Terraform for security issues
tfsec .

# Run Checkov
checkov -d terraform/

# Scan for secrets
git-secrets --scan
```

### AWS CLI

```bash
# List all resources in account
aws resourcegroupstaggingapi get-resources

# Get resource costs
aws ce get-cost-and-usage \
    --time-period Start=2025-12-01,End=2025-12-31 \
    --granularity MONTHLY \
    --metrics BlendedCost

# Get compliance status
aws configservice describe-compliance-by-config-rule
```

## Troubleshooting

### Terraform State Lock

If Terraform state is locked:

```bash
# Force unlock (use with caution)
terraform force-unlock <lock-id>
```

### Permission Errors

```bash
# Verify current identity
aws sts get-caller-identity

# Check assumed role
aws sts get-session-token --duration-seconds 3600
```

### VPC Creation Failures

```bash
# Check VPC limits
aws service-quotas get-service-quota \
    --service-code vpc \
    --quota-code L-F678F1CE

# Request limit increase if needed
aws service-quotas request-service-quota-increase \
    --service-code vpc \
    --quota-code L-F678F1CE \
    --desired-value 20
```

## What's Next?

1. **Review Documentation**: Read through `/docs` for detailed architecture
2. **Configure Direct Connect**: Set up on-premises connectivity
3. **Deploy Applications**: Use the modules to deploy your applications
4. **Set Up Monitoring**: Configure dashboards and alerts
5. **Compliance Validation**: Run compliance scans and generate reports
6. **Security Testing**: Perform vulnerability scans and penetration tests

## Cost Estimate

Initial deployment costs (monthly):

| Service | Estimated Cost |
|---------|----------------|
| VPCs (3) | Free |
| NAT Gateways (6) | $324 |
| Transit Gateway | $146 |
| GuardDuty | $500 |
| Security Hub | $200 |
| CloudTrail | $100 |
| Config | $150 |
| VPC Flow Logs | $200 |
| **Total** | **~$1,620/month** |

*Excludes compute, storage, and data transfer costs*

## Getting Help

- **Documentation**: See `/docs` directory
- **Issues**: [GitHub Issues](https://github.com/YOUR_ORG/aws-finserv-security-infrastructure/issues)
- **Email**: devops@company.com
- **Slack**: #aws-infrastructure

## Resources

- [AWS Well-Architected Framework](https://aws.amazon.com/architecture/well-architected/)
- [AWS Security Best Practices](https://aws.amazon.com/security/best-practices/)
- [Terraform AWS Provider](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)
- [PCI-DSS on AWS](https://aws.amazon.com/compliance/pci-dss-level-1-faqs/)

---

**Last Updated**: 2025-12-11  
**Version**: 1.0.0
